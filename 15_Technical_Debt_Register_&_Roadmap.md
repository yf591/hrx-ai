
# 15. Technical Debt Register & Roadmap

*バージョン: 1.0.0 | 最終更新日: 2025年5月14日*

## 目次

1.  [はじめに](#1-はじめに)
    *   1.1 本書の目的
    *   1.2 技術的負債とは
    *   1.3 HRX-AIにおける技術的負債管理の重要性
2.  [技術的負債の特定と分類](#2-技術的負債の特定と分類)
    *   2.1 技術的負債の発生源
    *   2.2 特定方法
    *   2.3 分類カテゴリー
3.  [技術的負債レジスター (管理台帳)](#3-技術的負債レジスター-管理台帳)
    *   3.1 レジスターの項目定義
    *   3.2 記録ツールと運用
4.  [技術的負債の評価と優先順位付け](#4-技術的負債の評価と優先順位付け)
    *   4.1 影響度評価
    *   4.2 緊急度評価
    *   4.3 解決コスト評価
    *   4.4 優先度マトリクス
5.  [技術的負債返済ロードマップ](#5-技術的負債返済ロードマップ)
    *   5.1 返済戦略
    *   5.2 スプリントへの組み込み
    *   5.3 大規模リファクタリングの計画
    *   5.4 進捗の追跡と報告
6.  [技術的負債の予防策](#6-技術的負債の予防策)
    *   6.1 高品質なコードレビュー
    *   6.2 自動テストの徹底
    *   6.3 設計原則の遵守 (SOLID, DRYなど)
    *   6.4 定期的なリファクタリング
    *   6.5 ドキュメントの整備
    *   6.6 知識共有とトレーニング
    *   6.7 技術選定の慎重な判断
7.  [役割と責任](#7-役割と責任)
8.  [ツールの活用](#8-ツールの活用)
9.  [本ドキュメントのレビューと更新](#9-本ドキュメントのレビューと更新)

## 1. はじめに

*   **1.1 本書の目的**
    このドキュメントは、HRX-AI開発プロジェクトにおいて発生する技術的負債を体系的に特定、評価、追跡し、計画的に返済するためのフレームワークとプロセスを定義することを目的としています。これにより、システムの長期的な保守性、拡張性、品質を維持し、開発速度の低下や運用コストの増大を防ぎます。

*   **1.2 技術的負債とは**
    技術的負債とは、短期的な開発速度や便宜のために、設計や実装において理想的ではない、または不完全な解決策を選択した結果、将来的に追加の作業やコスト（利子）が発生する状態を指します。意図的なもの（例 納期優先のための暫定対応）と非意図的なもの（例 設計ミス、知識不足）があります。

*   **1.3 HRX-AIにおける技術的負債管理の重要性**
    HRX-AIは、最先端のAI技術を活用し、企業の戦略的人事業務を支援する複雑なシステムです。急速な技術進化や市場ニーズの変化に対応するためには、コードベースの健全性が不可欠です。技術的負債を放置すると、以下の問題が発生する可能性があります。
    *   新機能追加や変更のコスト増大、リードタイム長期化
    *   バグの増加と品質低下
    *   システムの不安定化、パフォーマンス劣化
    *   開発者のモチベーション低下
    *   セキュリティ脆弱性のリスク増大
    *   AIモデルのメンテナンス性低下や再学習コスト増

## 2. 技術的負債の特定と分類

*   **2.1 技術的負債の発生源**
    *   **設計負債** 不適切なアーキテクチャ選択、不十分な設計、拡張性の低い設計。
    *   **コード負債** 低品質なコード (複雑、重複、読みにくい)、不適切なコーディング規約違反、コメント不足。
    *   **テスト負債** 不十分なテストカバレッジ、自動テストの欠如、不安定なテスト。
    *   **ドキュメント負債** 不正確または古いドキュメント、ドキュメントの欠如。
    *   **AIモデル負債** 実験管理の不備、モデルの再現性欠如、データドリフト/コンセプトドリフトへの未対応、複雑すぎるモデルパイプライン。
    *   **インフラ/DevOps負債** 手動デプロイプロセス、不十分な監視、古いインフラコンポーネント。
    *   **知識負債** 特定の担当者に知識が集中 (属人化)、チーム内での知識共有不足。
    *   **環境負債** 開発環境と本番環境の差異、ビルド時間の長期化。

*   **2.2 特定方法**
    *   **コードレビュー** プルリクエストレビュー時に、設計上の問題やコード品質の問題を指摘。
    *   **静的コード解析ツール**
        *   フロントエンド: ESLint, Prettier (`Development_Specification.md` 11.2)
        *   バックエンド: Pylint, Flake8, Black, MyPy (`Development_Specification.md` 11.2)
        *   SonarQube, CodeClimateなどの統合コード品質プラットフォーム。
    *   **技術的負債ワークショップ/会議** 開発チームで定期的に集まり、既知の問題点や改善点を洗い出す。
    *   **バグレポート分析** 特定のモジュールでバグが頻発している場合、根本的な設計やコード品質に問題がある可能性。
    *   **開発者の体感** 新機能追加や修正が「やりにくい」「時間がかかる」と感じる箇所は負債の兆候。
    *   **テストカバレッジ分析** テストが不足している箇所を特定。
    *   **パフォーマンスプロファイリング** ボトルネックとなっているコードやクエリを特定。
    *   **AIモデル監査** モデルの性能、公平性、堅牢性の定期的なレビュー。

*   **2.3 分類カテゴリー**
    技術的負債を分類することで、影響範囲や解決策の検討が容易になります。
    *   **アーキテクチャ/設計 (Architecture/Design)**
    *   **コード品質 (Code Quality)**
    *   **テスト (Testing)**
    *   **ドキュメント (Documentation)**
    *   **AI/MLモデル (AI/ML Model)**
    *   **インフラ/DevOps (Infrastructure/DevOps)**
    *   **パフォーマンス (Performance)**
    *   **セキュリティ (Security)**
    *   **ユーザビリティ/UX (Usability/UX)** (設計段階での妥協など)
    *   **依存関係 (Dependencies)** (古いライブラリの使用など)

## 3. 技術的負債レジスター (管理台帳)

特定された技術的負債は、一元的に管理するためのレジスター (台帳) に記録します。

*   **3.1 レジスターの項目定義**
    各技術的負債アイテムに対して、以下の情報を記録します。
    *   **ID**: 一意の識別子。
    *   **タイトル**: 負債の内容を簡潔に表すタイトル。
    *   **説明**: 負債の詳細な説明、発生経緯、現状の問題点。
    *   **発生箇所**: 関連するモジュール、コンポーネント、ファイル、コード行など。
    *   **分類カテゴリー**: 2.3で定義したカテゴリー。
    *   **報告日**: 負債が特定された日付。
    *   **報告者**: 負債を報告した担当者。
    *   **影響度**: (4.1参照) システム、開発、ビジネスへの影響の大きさ (例 高/中/低、または数値スコア)。
    *   **緊急度**: (4.2参照) 対応の緊急性 (例 高/中/低)。
    *   **解決コスト (見積)**: (4.3参照) 返済に必要な工数や期間の見積もり (例 人時、ストーリーポイント)。
    *   **優先度**: (4.4参照) 影響度、緊急度、解決コストを総合的に判断した対応優先度。
    *   **提案される解決策**: 具体的な返済方法やリファクタリング案。
    *   **担当者/チーム**: 返済を担当する個人またはチーム (未定でも可)。
    *   **ステータス**: Open, In Progress, Resolved, Won't Fix (対応しない判断) など。
    *   **解決日**: 負債が解消された日付。
    *   **関連チケット/PR**: Jiraの課題IDやGitHubのプルリクエストIDなど。
    *   **備考**: その他特記事項。

*   **3.2 記録ツールと運用**
    *   **ツール**
        *   Jira: 専用の課題タイプ (例 "TechnicalDebt") やラベルを作成して管理。
        *   Confluence/Notion: 専用ページを作成し、表形式で管理。Jiraと連携。
        *   専用の技術的負債管理ツール (例 SonarQubeの課題管理機能、Stepsize, CodeSceneなど)。
        *   スプレッドシート (小規模チームや初期段階)。
    *   **運用**
        *   技術的負債が特定されたら、速やかにレジスターに記録。
        *   定期的な技術的負債レビュー会議 (例 スプリント計画ミーティングの一部、または月次) で、新規登録された負債の評価、優先順位付け、返済計画を議論。
        *   レジスターは開発チーム全体がアクセス可能にし、透明性を保つ。

## 4. 技術的負債の評価と優先順位付け

記録された技術的負債は、客観的な基準に基づいて評価し、対応の優先順位を決定します。

*   **4.1 影響度評価**
    その負債が放置された場合に、以下の観点でどのような悪影響があるかを評価します。
    *   **システムへの影響**: パフォーマンス低下、不安定化、セキュリティ脆弱性、データ破損リスクなど。
    *   **開発への影響**: 新機能開発の遅延、バグ修正の困難化、コードの可読性・保守性の低下、開発者の作業効率低下。
    *   **ビジネスへの影響**: ユーザーエクスペリエンスの低下、顧客満足度の低下、機会損失、ブランドイメージの毀損、運用コストの増大。
    *   **AIモデルへの影響**: モデルの精度低下、バイアス増幅、説明可能性の低下、再学習コスト増。
    *   評価スケール例: 高 (広範囲に深刻な影響)、中 (一部機能や開発に顕著な影響)、低 (限定的な影響、または軽微な非効率)。

*   **4.2 緊急度評価**
    その負債にどれだけ早く対応する必要があるかを評価します。
    *   **クリティカル**: 直ちに修正が必要 (例 セキュリティ脆弱性、本番障害の原因)。
    *   **高**: 次の1〜2スプリントで対応すべき (例 主要機能の開発ブロッカー、頻繁なバグの原因)。
    *   **中**: 数ヶ月以内に対応を計画すべき (例 徐々に開発効率を低下させているもの)。
    *   **低**: 時間があるときに対応すればよい (例 軽微なコードの重複、ドキュメントの小さな不備)。

*   **4.3 解決コスト評価**
    その負債を返済 (修正、リファクタリング) するために必要な工数や期間を見積もります。
    *   見積もり単位例: 人時、人日、ストーリーポイント。
    *   Tシャツサイジング (XS, S, M, L, XL) も利用可能。
    *   見積もりには、設計、実装、テスト、ドキュメント更新の工数を含める。

*   **4.4 優先度マトリクス**
    影響度、緊急度、解決コストを総合的に考慮して、対応の優先順位を決定します。
    *   **例1 (影響度 x 緊急度マトリクス)**
        |                | 緊急度 高 | 緊急度 中 | 緊急度 低 |
        | -------------- | --------- | --------- | --------- |
        | **影響度 高**  | 最優先    | 優先      | 中        |
        | **影響度 中**  | 優先      | 中        | 低        |
        | **影響度 低**  | 中        | 低        | 検討      |
    *   **例2 (ROI的アプローチ)**
        *   優先度スコア = (影響度スコア * 重み1 + 緊急度スコア * 重み2) / 解決コストスコア
        *   スコアが高いものから優先的に対応。
    *   最終的な優先順位は、技術的負債レビュー会議でチームの合意を得て決定します。

## 5. 技術的負債返済ロードマップ

優先順位付けされた技術的負債を、計画的に返済するためのロードマップを作成します。

*   **5.1 返済戦略**
    *   **継続的返済 (ボーイスカウト・ルール)**
        *   「来たときよりも綺麗に」の精神で、機能開発やバグ修正の際に、関連する小さな技術的負債を少しずつ返済していく。
    *   **計画的返済 (スプリントへの組み込み)**
        *   各スプリントの計画時に、開発キャパシティの一部 (例 10-20%) を技術的負債の返済タスクに割り当てる。
    *   **集中返済 (リファクタリングスプリント/期間)**
        *   大規模な技術的負債や、広範囲に影響するアーキテクチャ改善などは、専用のスプリントや期間を設けて集中的に取り組む。
    *   **機会的返済**
        *   関連機能の大幅な改修やリプレースの際に、併せて技術的負債を解消する。

*   **5.2 スプリントへの組み込み**
    *   スプリント計画ミーティングで、バックログから優先度の高い技術的負債アイテムを選択し、スプリントバックログに追加。
    *   他のユーザーストーリーと同様に、タスク分割、工数見積もり、受け入れ基準を設定。
    *   スプリントレビューで、返済された負債とその効果を報告。

*   **5.3 大規模リファクタリングの計画**
    *   広範囲なリファクタリングやアーキテクチャ変更は、独立したプロジェクトとして計画。
    *   明確な目標、スコープ、期間、リソース、リスク評価、テスト計画を策定。
    *   段階的な移行計画 (ストラングラーパターンなど) を検討し、システム全体への影響を最小限に抑える。

*   **5.4 進捗の追跡と報告**
    *   技術的負債レジスターのステータスを定期的に更新。
    *   Jiraなどのダッシュボードで、未解決の負債数、優先度別分布、返済速度などを可視化。
    *   技術的負債の状況と返済進捗を、定期的に開発チーム全体およびステークホルダーに報告。

## 6. 技術的負債の予防策

新たな技術的負債の発生を抑制するための予防策を講じます。

*   **6.1 高品質なコードレビュー**
    *   設計原則の遵守、コードの可読性、保守性、テスト容易性などをレビュー観点に含める。
    *   短期的な妥協が将来的な負債に繋がらないか意識する。
*   **6.2 自動テストの徹底**
    *   ユニットテスト、統合テスト、E2Eテストを拡充し、リグレッションを防ぐ。
    *   高いテストカバレッジを維持。
*   **6.3 設計原則の遵守 (SOLID, DRYなど)**
    *   変更に強く、理解しやすいコードベースを維持するための設計原則をチームで共有し、実践する。
*   **6.4 定期的なリファクタリング**
    *   ボーイスカウトルールを実践し、小さなリファクタリングを日常的に行う。
    *   コードの「臭い」を検出し、早期に改善する。
*   **6.5 ドキュメントの整備**
    *   設計思想、アーキテクチャ、API仕様、複雑なロジックなどを適切にドキュメント化し、コード変更と同期して更新する。
*   **6.6 知識共有とトレーニング**
    *   ペアプログラミング、モブプログラミング、勉強会などを通じて、チーム内での知識の偏りをなくし、スキルレベルを向上させる。
    *   新しい技術や設計パターンに関する継続的な学習。
*   **6.7 技術選定の慎重な判断**
    *   新しいライブラリやフレームワーク、ツールを導入する際は、そのメリットだけでなく、長期的な保守性、学習コスト、コミュニティサポートなどを十分に評価する。短期的な流行に飛びつかない。

## 7. 役割と責任

*   **開発チーム全体**: 技術的負債の特定、報告、議論、および返済に共同で責任を持つ。
*   **テックリード/シニアエンジニア**: 技術的負債の評価、優先順位付けのリード。大規模リファクタリングの設計と推進。コードレビューでの指導。
*   **プロダクトマネージャー/プロダクトオーナー**: 技術的負債返済の重要性を理解し、ビジネス価値とのバランスを取りながら、スプリント計画に負債返済タスクを組み込むことを支援。
*   **QAチーム**: テストを通じて、品質に関わる技術的負債 (テスト容易性の低いコード、不安定な機能など) を特定し報告。
*   **AI/MLチーム**: AIモデルに関する特有の負債 (モデルの陳腐化、データパイプラインの複雑化など) の特定と管理。

## 8. ツールの活用

*   **静的解析ツール**: ESLint, Pylint, SonarQube, CodeClimateなど。コードの品質問題を自動的に検出し、負債の早期発見に貢献。
*   **課題管理システム**: Jira, Asanaなど。技術的負債レジスターの運用。
*   **バージョン管理システム**: Git。コード変更の追跡と、リファクタリング作業のブランチ管理。
*   **CI/CDツール**: GitHub Actions, CircleCI。テスト自動化と品質ゲートの組み込み。
*   **コードカバレッジツール**: Jest coverage, Pytest-covなど。テストの網羅性を可視化。
*   **技術的負債可視化ツール**: Stepsize, CodeSceneなど (有償ツール)。コードベースの複雑性や変更頻度から負債を分析・可視化。

## 9. 本ドキュメントのレビューと更新

*   **方針**
    *   本「Technical Debt Register & Roadmap」の運用方法や評価基準は、プロジェクトの進捗やチームの成熟度に応じて見直す必要があります。
*   **プロセス**
    *   少なくとも四半期に一度、または大規模なリリース後に、開発チームと関連ステークホルダーで本ドキュメントの内容と運用状況をレビュー。
    *   特定された改善点や変更点を反映し、ドキュメントを更新。
